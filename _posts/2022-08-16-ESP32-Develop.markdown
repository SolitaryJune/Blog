---
layout:     post
title:      "ESP32开发记录"
subtitle:   "EasyCon,蓝牙,YD-ESP32-C3"
date:       2022-08-16
update:     2022-08-16
author:     "elmagnifico"
header-img: "img/y5.jpg"
catalog:    true
tags:
    - ESP32
---

## Forward

好久没弄ESP32，又要捡起来折腾一下，记录一下相关内容。



## 环境

ESP32 IDF没有IDE，所以还是依赖VS code来完成，直接搜索esp32，安装对应插件

![image-20220816004715027](http://img.elmagnifico.tech:9514/static/upload/elmagnifico/202208160047129.png)



在下一步前，建议先把代理开起来，不然下载速度感人

![image-20220816012240491](http://img.elmagnifico.tech:9514/static/upload/elmagnifico/202208160122545.png)



根据教程，F1，输入`Select where to save configuration settings` 设置一下工程路径，然后下载对应的IDF

![image-20220816011718561](http://img.elmagnifico.tech:9514/static/upload/elmagnifico/202208160117614.png)

![image-20220816005131804](http://img.elmagnifico.tech:9514/static/upload/elmagnifico/202208160051874.png)

需要注意的是这里插件其实已经把整个虚拟环境安装好了，包括各种编译需要的工具链。

所以官方教程中的编译第一个项目，需要安装的各种都可以跳过，直接进入编译调试环节就行了。



最后安装环境可能会出错

```shell
Command failed: "E:\switch\esp32\.espressif\tools\idf-python\3.8.7\python.exe" "E:\switch\esp32\esp\esp-idf\tools\idf_tools.py" install-python-env
    ERROR: Command errored out with exit status 1:
     command: 'E:\switch\esp32\.espressif\python_env\idf4.4_py3.8_env\Scripts\python.exe' -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'C:\\Users\\elmag\\AppData\\Local\\Temp\\pip-req-build-ft3q1rrh\\setup.py'"'"'; __file__='"'"'C:\\Users\\elmag\\AppData\\Local\\Temp\\pip-req-build-ft3q1rrh\\setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base 'C:\Users\elmag\AppData\Local\Temp\pip-pip-egg-info-9j49suw2'
         cwd: C:\Users\elmag\AppData\Local\Temp\pip-req-build-ft3q1rrh\
    Complete output (34 lines):
    running egg_info
    creating C:\Users\elmag\AppData\Local\Temp\pip-pip-egg-info-9j49suw2\esp_windows_curses.egg-info
    writing C:\Users\elmag\AppData\Local\Temp\pip-pip-egg-info-9j49suw2\esp_windows_curses.egg-info\PKG-INFO
    writing dependency_links to C:\Users\elmag\AppData\Local\Temp\pip-pip-egg-info-9j49suw2\esp_windows_curses.egg-info\dependency_links.txt
    writing requirements to C:\Users\elmag\AppData\Local\Temp\pip-pip-egg-info-9j49suw2\esp_windows_curses.egg-info\requires.txt
    writing top-level names to C:\Users\elmag\AppData\Local\Temp\pip-pip-egg-info-9j49suw2\esp_windows_curses.egg-info\top_level.txt
    writing manifest file 'C:\Users\elmag\AppData\Local\Temp\pip-pip-egg-info-9j49suw2\esp_windows_curses.egg-info\SOURCES.txt'
    reading manifest file 'C:\Users\elmag\AppData\Local\Temp\pip-pip-egg-info-9j49suw2\esp_windows_curses.egg-info\SOURCES.txt'
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
      File "C:\Users\elmag\AppData\Local\Temp\pip-req-build-ft3q1rrh\setup.py", line 19, in <module>
        setup(name='esp-windows-curses',
      File "E:\switch\esp32\.espressif\python_env\idf4.4_py3.8_env\lib\site-packages\setuptools\__init__.py", line 153, in setup
        return distutils.core.setup(**attrs)
      File "distutils\core.py", line 148, in setup
      File "distutils\dist.py", line 966, in run_commands
      File "distutils\dist.py", line 985, in run_command
      File "E:\switch\esp32\.espressif\python_env\idf4.4_py3.8_env\lib\site-packages\setuptools\command\egg_info.py", line 299, in run
        self.find_sources()
      File "E:\switch\esp32\.espressif\python_env\idf4.4_py3.8_env\lib\site-packages\setuptools\command\egg_info.py", line 306, in find_sources
        mm.run()
      File "E:\switch\esp32\.espressif\python_env\idf4.4_py3.8_env\lib\site-packages\setuptools\command\egg_info.py", line 544, in run
        self.prune_file_list()
      File "E:\switch\esp32\.espressif\python_env\idf4.4_py3.8_env\lib\site-packages\setuptools\command\egg_info.py", line 596, in prune_file_list
        build = self.get_finalized_command('build')
      File "distutils\cmd.py", line 298, in get_finalized_command
      File "distutils\dist.py", line 857, in get_command_obj
      File "E:\switch\esp32\.espressif\python_env\idf4.4_py3.8_env\lib\site-packages\setuptools\dist.py", line 755, in get_command_class
        self.cmdclass[command] = cmdclass = ep.load()
      File "E:\switch\esp32\.espressif\python_env\idf4.4_py3.8_env\lib\site-packages\pkg_resources\__init__.py", line 2450, in load
        return self.resolve()
      File "E:\switch\esp32\.espressif\python_env\idf4.4_py3.8_env\lib\site-packages\pkg_resources\__init__.py", line 2456, in resolve
        module = __import__(self.module_name, fromlist=['__name__'], level=0)
    ModuleNotFoundError: No module named 'setuptools.command.build'
    ----------------------------------------
ERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
WARNING: You are using pip version 20.3.3; however, version 22.2.2 is available.
You should consider upgrading via the 'E:\switch\esp32\.espressif\python_env\idf4.4_py3.8_env\Scripts\python.exe -m pip install --upgrade pip' command.
Traceback (most recent call last):
  File "E:\switch\esp32\esp\esp-idf\tools\idf_tools.py", line 1860, in <module>
    main(sys.argv[1:])
  File "E:\switch\esp32\esp\esp-idf\tools\idf_tools.py", line 1856, in main
    action_func(args)
  File "E:\switch\esp32\esp\esp-idf\tools\idf_tools.py", line 1577, in action_install_python_env
    subprocess.check_call(run_args, stdout=sys.stdout, stderr=sys.stderr, env=env_copy)
  File "subprocess.py", line 364, in check_call
subprocess.CalledProcessError: Command '['E:\\switch\\esp32\\.espressif\\python_env\\idf4.4_py3.8_env\\Scripts\\python.exe', '-m', 'pip', 'install', '--no-warn-script-location', '-r', 'E:\\switch\\esp32\\esp\\esp-idf\\requirements.txt', '--extra-index-url', 'https://dl.espressif.com/pypi']' returned non-zero exit status 1.

```





## 蓝牙 Classic HID





## Summary

未完待续



## Quote

> https://github.com/espressif/esp-idf
>
> https://docs.espressif.com/projects/esp-idf/zh_CN/latest/esp32c3/get-started/index.html
>
> https://github.com/espressif/vscode-esp-idf-extension/blob/master/docs/tutorial/install.md
>
> https://github.com/espressif/esp-idf/tree/2761ad4865919693fcd02f4096711ba0fd0f6271/examples/bluetooth/bluedroid/classic_bt/bt_hid_mouse_device

