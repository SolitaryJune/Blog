---
layout:     post
title:      "编译onion的u-boot"
subtitle:   "onion"
date:       2023-04-01
update:     2023-04-01
author:     "elmagnifico"
header-img: "img/z0.jpg"
catalog:    true
tags:
    - u-boot
    - Onion
    - OpenWrt
---

## Foreword

接上篇，onion编译固件，可能还需要更新u-boot



## u-boot

> https://github.com/OnionIoT/u-boot
>
> https://github.com/OnionIoT/omega2-bootloader



#### 搭建环境

一键自动安装环境，还是比较简单的

```
sh setup_env.sh
```



增加build的权限

```
chmod +x ./build.sh
```



#### 编译

build

```
./build.sh
```



顺利的话就能看到编译成功了

```
		-Map u-boot.map -o u-boot
/opt/buildroot-gcc342/bin/mipsel-linux-objcopy --gap-fill=0xff -O srec u-boot u-boot.srec
/opt/buildroot-gcc342/bin/mipsel-linux-objcopy --gap-fill=0xff -O binary u-boot uboot.bin
./tools/mkimage -A mips -T standalone -C none \
	-a 0xBC000000 -e 0xbc000000 \
	-n "SPI Flash Image" \
	-r DDR2 -s 16 -t 128 -u 32 \
	-y 0xFF -z 0xFF -w 0xFF -d uboot.bin uboot.img
Image Name:   SPI Flas
Created:      Fri Mar 31 19:52:15 2023
Image Type:   MIPS Linux Standalone Program (uncompressed)
Data Size:    173124 Bytes = 169.07 kB = 0.17 MB
Load Address: 0xBC000000
Entry Point:  0xBC000000
DRAM Parameter: 2b (Parm0=0 Parm1=0)

===============<<IMPORTANT>>==================
Notes:Uboot firmware is uboot.bin NOT uboot.img
================================================

> Done

```



编译后的bin文件就直接在目录下

```
uboot-omega2p-20230401.bin
uboot-omega2-20230401.bin
```



## Summary

easy



## Quote

> https://github.com/OnionIoT/omega2-bootloader

